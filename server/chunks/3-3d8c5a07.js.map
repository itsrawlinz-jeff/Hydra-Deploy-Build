{"version":3,"file":"3-3d8c5a07.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/conversation/_id_/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/3.js"],"sourcesContent":["import { c as collections } from \"../../../../chunks/database.js\";\nimport { ObjectId } from \"mongodb\";\nimport { e as error } from \"../../../../chunks/index.js\";\nimport { a as authCondition } from \"../../../../chunks/auth.js\";\nimport { U as UrlDependency } from \"../../../../chunks/UrlDependency.js\";\nconst load = async ({ params, depends, locals }) => {\n  let conversation;\n  let shared = false;\n  if (params.id.length === 7) {\n    conversation = await collections.sharedConversations.findOne({\n      _id: params.id\n    });\n    shared = true;\n    if (!conversation) {\n      throw error(404, \"Conversation not found\");\n    }\n  } else {\n    conversation = await collections.conversations.findOne({\n      _id: new ObjectId(params.id),\n      ...authCondition(locals)\n    });\n    depends(UrlDependency.Conversation);\n    if (!conversation) {\n      const conversationExists = await collections.conversations.countDocuments({\n        _id: new ObjectId(params.id)\n      }) !== 0;\n      if (conversationExists) {\n        throw error(\n          403,\n          \"You don't have access to this conversation. If someone gave you this link, ask them to use the 'share' feature instead.\"\n        );\n      }\n      throw error(404, \"Conversation not found.\");\n    }\n  }\n  return {\n    messages: conversation.messages,\n    title: conversation.title,\n    model: conversation.model,\n    preprompt: conversation.preprompt,\n    shared\n  };\n};\nexport {\n  load\n};\n","import * as server from '../entries/pages/conversation/_id_/_page.server.ts.js';\n\nexport const index = 3;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/conversation/_id_/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/conversation/[id]/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/3.cde70746.js\",\"_app/immutable/chunks/preload-helper.a4192956.js\",\"_app/immutable/chunks/scheduler.953cfe2b.js\",\"_app/immutable/chunks/index.1fa04a18.js\",\"_app/immutable/chunks/pendingMessage.b2073f9a.js\",\"_app/immutable/chunks/forms.c5b9bfc5.js\",\"_app/immutable/chunks/singletons.c7a65059.js\",\"_app/immutable/chunks/stores.920431b6.js\",\"_app/immutable/chunks/parse.bee59afc.js\",\"_app/immutable/chunks/marked.esm.76161808.js\",\"_app/immutable/chunks/titleUpdate.d416a6e2.js\"];\nexport const stylesheets = [\"_app/immutable/assets/pendingMessage.9da0802e.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;;;;;;;;;AAKA,MAAM,IAAI,GAAG,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK;AACpD,EAAE,IAAI,YAAY,CAAC;AACnB,EAAE,IAAI,MAAM,GAAG,KAAK,CAAC;AACrB,EAAE,IAAI,MAAM,CAAC,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;AAC9B,IAAI,YAAY,GAAG,MAAM,WAAW,CAAC,mBAAmB,CAAC,OAAO,CAAC;AACjE,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE;AACpB,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,GAAG,IAAI,CAAC;AAClB,IAAI,IAAI,CAAC,YAAY,EAAE;AACvB,MAAM,MAAM,KAAK,CAAC,GAAG,EAAE,wBAAwB,CAAC,CAAC;AACjD,KAAK;AACL,GAAG,MAAM;AACT,IAAI,YAAY,GAAG,MAAM,WAAW,CAAC,aAAa,CAAC,OAAO,CAAC;AAC3D,MAAM,GAAG,EAAE,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;AAClC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;AAC9B,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;AACxC,IAAI,IAAI,CAAC,YAAY,EAAE;AACvB,MAAM,MAAM,kBAAkB,GAAG,MAAM,WAAW,CAAC,aAAa,CAAC,cAAc,CAAC;AAChF,QAAQ,GAAG,EAAE,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;AACpC,OAAO,CAAC,KAAK,CAAC,CAAC;AACf,MAAM,IAAI,kBAAkB,EAAE;AAC9B,QAAQ,MAAM,KAAK;AACnB,UAAU,GAAG;AACb,UAAU,yHAAyH;AACnI,SAAS,CAAC;AACV,OAAO;AACP,MAAM,MAAM,KAAK,CAAC,GAAG,EAAE,yBAAyB,CAAC,CAAC;AAClD,KAAK;AACL,GAAG;AACH,EAAE,OAAO;AACT,IAAI,QAAQ,EAAE,YAAY,CAAC,QAAQ;AACnC,IAAI,KAAK,EAAE,YAAY,CAAC,KAAK;AAC7B,IAAI,KAAK,EAAE,YAAY,CAAC,KAAK;AAC7B,IAAI,SAAS,EAAE,YAAY,CAAC,SAAS;AACrC,IAAI,MAAM;AACV,GAAG,CAAC;AACJ,CAAC;;;;;;;ACxCW,MAAC,KAAK,GAAG,EAAE;AACvB,IAAI,eAAe,CAAC;AACR,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAoD,CAAC,EAAE,QAAQ;AAE1H,MAAC,SAAS,GAAG,+CAA+C;AAC5D,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,kDAAkD,CAAC,6CAA6C,CAAC,yCAAyC,CAAC,kDAAkD,CAAC,yCAAyC,CAAC,8CAA8C,CAAC,0CAA0C,CAAC,yCAAyC,CAAC,8CAA8C,CAAC,+CAA+C,EAAE;AAC7f,MAAC,WAAW,GAAG,CAAC,mDAAmD,EAAE;AACrE,MAAC,KAAK,GAAG;;;;"}